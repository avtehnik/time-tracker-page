<!DOCTYPE html>
<html>
<head>
  <title>Time tracker helper</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/bootstrap.min.css"/>
  <style>


      .form-control.task,
      .form-control.time {
          width: 80px;
      }

      .form-control.comment {
          width: 453px;
      }

      .form-control.time {
          width: 70px;
      }

      .container {
          margin-top: 100px;
      }
  </style>

</head>
<body>
<div id="vue-app" style="padding: 20px">
  <h1>Total {{totalTime}}h Remaining {{lastTime.last}} overtime {{lastTime.overtime}}</h1>
  <div class="row">
    <div class="col-md-7">

      <ul class="list-group">
        <li class="list-group-item">
          <div class="form-inline">
            <div class="form-group">
              <input type="date" class="form-control" v-model="taskDate" size="5" placeholder="task" @change="updateDate">
            </div>
            <div class="form-group">
              <button class="form-control" v-on:click="updateDate">Set Today</button>
            </div>
            <div class="form-group">
              <input type="text" class="form-control" v-model="task" size="10" placeholder="task">
            </div>
            <div class="form-group">
              <input type="number" class="form-control time" v-model="time" size="10" placeholder="time">
            </div>
            <div class="form-group">
              <input type="text" class="form-control" v-model="comment" placeholder="comment">
            </div>
            <button v-on:click="addRow()" class="btn btn-default">Add</button>
          </div>
        </li>
        <li class="list-group-item">
          <button v-on:click="addTask(73647,'daily meeting', 0.5)" class="btn btn-default">ek daily 0.5</button>
          <button v-on:click="addTask(73647,'daily meeting', 1)" class="btn btn-default">ek daily 1</button>
          <button v-on:click="addTask(73648,'daily meeting',0.5)" class="btn btn-default">n 0.5</button>
          <button v-on:click="addTask(73648,'daily meeting',0.25)" class="btn btn-default">n 0.25</button>
          <button v-on:click="addTask(73648,'estimate game', 1)" class="btn btn-default">n estimate 1</button>
          <button v-on:click="addTask(75997,'Other meetings', 0.5)" class="btn btn-default">Other meetings 0.5</button>
        </li>
      </ul>

      <ul class="list-group">
        <li class="list-group-item" v-for="(timeItem, index) in timeSeries">
          <div class="form-inline">
            <div class="form-group">
              <input type="text" class="form-control "  size="10" v-model="timeItem.date" placeholder="date">
            </div>
            <div class="form-group">
              <input type="text" class="form-control task" v-model="timeItem.task" placeholder="task">
            </div>
            <div class="form-group">
              <input type="number" class="form-control time"  v-model="timeItem.time" placeholder="time">
            </div>
            <div class="form-group">
              <input type="text" class="form-control comment" v-model="timeItem.comment" placeholder="comment">
            </div>
            <div class="form-group">
              <button v-on:click="deleteItem(index)" class="btn btn-default">x</button>
            </div>
          </div>
        </li>
      </ul>
      <button v-on:click="save()" class="btn btn-default">Save</button>
      <br>
      <br>
      <input type="password" class="form-control comment" v-model="apiKey" @change="saveApiKey" placeholder="apikey">
    </div>
    <div class="col-md-5">
      <div v-for="timeItem in timeSeries" class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">{{timeItem.task}} {{timeItem.time}} h [{{timeItem.date}}]</h3>
        </div>
        <div class="panel-body">
          {{timeItem.comment}}
        </div>
      </div>
      <h2>calendar</h2>
      <div v-for="(dayItem, dayNmae) in calendar" class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">{{dayNmae}} {{dayItem.reduce( (accumulator, task) => accumulator + parseFloat(task.hours),0)}} h</h3>
        </div>
        <div class="panel-body">

          <ul>
            <li v-for="task in dayItem" style="padding: 3px"   >
              {{task.project.name}} ({{task.issue.id}}) {{task.hours}}h<br>
              {{task.comments}}
              <br>
            </li>


          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="js/vue.js"></script>
<script src="js/jquery-3.5.1.min.js"></script>
<script src="js/app.js"></script>
</body>
</html>